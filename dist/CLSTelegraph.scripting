{
  "name": "财联社电报",
  "icon": "newspaper.fill",
  "color": "D63434",
  "summary": "实时获取财联社金融快讯",
  "type": "2",
  "version": "1.0.0",
  "script": "// @file: index.tsx\n/**\n * @name 财联社电报\n * @description 7x24小时财经快讯\n */\n\ntype NewsItem = {\n  id: number;\n  title: string;\n  content: string;\n  ctime: number;\n  subjects: { subject_name: string }[];\n};\n\n// 辅助函数\nconst fmtTime = (ts: number) => {\n  const d = new Date(ts * 1000);\n  return `${d.getHours()。toString()。padStart(2，\"0\")}:${d.getMinutes()。toString().padStart(2,\"0\")}`;\n};\n\nconst clean = (t: string) => t.replace(/<[^>]+>/g, \"\").trim();\n\n// API 请求\nconst fetchNews = async (): Promise<NewsItem[]> => {\n  try {\n    const res = await fetch(\"https://www.cls.cn/nodeapi/telegraphList?rn=30\");\n    const json = (await res.json()) as { data: { roll_data: NewsItem[] } };\n    return json.data.roll_data || [];\n  } catch (e) {\n    console.error(e);\n    return [];\n  }\n};\n\n// 单行组件\nconst Row = ({ item }: { item: NewsItem }) => (\n  <链接 url={`https://www.cls.cn/detail/${item.id}`}>\n    <HStack alignment=\"top\" spacing={10}>\n      {/* 左侧时间轴 */}\n      <VStack alignment=\"trailing\" spacing={0} width={40}>\n        <Text font=\"caption2\" color={Color.gray} weight=\"bold\">{fmtTime(item.ctime)}</Text>\n        <Circle width={6} height={6} color={Color.red} padding={{ top: 4 }} />\n      </VStack>\n      \n      {/* 右侧内容 */}\n      <VStack alignment=\"leading\" spacing={4}>\n        {item.title。length > 0 && (\n          <Text font=\"subheadline\" weight=\"bold\" lineLimit={2}>{item.title}</Text>\n        )}\n        <Text font=\"footnote\" color={item.title ? Color.gray : Color.primary} lineLimit={4}>\n          {clean(item.content)}\n        </Text>\n        \n        {/* 标签 */}\n        {item.subjects?.length > 0 && (\n          <HStack spacing={4}>\n            {item.subjects.map((s, i) => (\n              <Text key={i.toString()} font=\"caption2\" color={Color.blue} background={Color.blue.opacity(0.1)} cornerRadius={2} padding={2}>\n                {s.subject_name}\n              </Text>\n            ))}\n          </HStack>\n        )}\n      </VStack>\n    </HStack>\n  </链接>\n);\n\n// 主应用\nconst App = () => {\n  const [list， setList] = useState<NewsItem[]>([]);\n  const [load， setLoad] = useState(true);\n\n  const refresh = async () => {\n    setLoad(true);\n    setList(await fetchNews());\n    setLoad(false);\n  };\n\n  useEffect(() => { refresh(); }， []);\n\n  return (\n    <List isLoading={load}>\n      <HStack padding={10}>\n        <Image systemName=\"newspaper.fill\" color={Color.red} />\n        <Text weight=\"bold\">财联社电报</Text>\n        <Spacer />\n        <Button action={refresh}>\n          <Image systemName=\"arrow.clockwise\" color={Color.blue} />\n        </Button>\n      </HStack>\n      {list.map(i => <Row key={i.id.toString()} item={i} />)}\n    </List>\n  );\n};\n\n// 入口\nNavigation.present(<App />);\n"
}